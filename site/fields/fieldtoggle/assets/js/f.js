$(document).ready(function(){function e(){function e(e,i){i.find("label.fieldtoggle").data("keepvisible")?(e.addClass("field-is-readonly"),e.find(".input").addClass("input-is-readonly")):e.hide()}function i(e,i){i.find("label.fieldtoggle").data("keepvisible")?(e.removeClass("field-is-readonly"),e.find(".input").removeClass("input-is-readonly")):e.show()}requiredfield=0,$($(".fieldtoggle input").get().reverse()).each(function(){var d=$(this).closest("div.field"),a=$(this).parent();if(a.data("hide"))var s=a.data("hide").split(" ");else var s=[];if(a.data("show"))var t=a.data("show").split(" ");else var t=[];$(this).is(":checked")&&($.each(s,function(i,s){var t=$(".field-name-"+s).closest(".field");t.find($('abbr[title="Required"]')).length&&(requiredfield=a.text()),e(t,d)}),$.each(t,function(e,a){i($(".field-name-"+a).closest(".field"),d)}))}),0!=requiredfield?(requiredHidden1=$(".field span.l10n").data("required-hidden1"),requiredHidden2=$(".field span.l10n").data("required-hidden2"),text=requiredHidden1+' "'+requiredfield+'" '+requiredHidden2,$("header.topbar .message-required").length?$("header.topbar .message-required .message-content").html(text):$("header.topbar").append('<div class="message message-is-alert message-required"><span class="message-content">'+text+'</span><a class="message-toggle"><i>Ã—</i></a></div>')):$("header.topbar .message-required").remove()}e(),$(document).ajaxComplete(function(){e()}),$("body").on("change",".fieldtoggle input",function(i){$(i.target).is(":checked")&&e()}),$("body").on("click",".message-required .message-toggle",function(){return $(".message-required").remove(),!1})});